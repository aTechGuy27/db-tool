(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{395:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>l});var a=r(5155),n=r(2115),s=r(5695),i=r(1186);let o=(0,n.createContext)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>{},logout:()=>{}});function l(e){let{children:t}=e,[r,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,f]=(0,n.useState)(!0),p=(0,s.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=(0,i.c4)();if(!e){l(!1),d(null),f(!1);return}try{let t=await fetch("".concat(i.JR,"/api/auth/user"),{headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(t.ok){let e=await t.json();l(!0),d(e)}else(0,i.QF)(),l(!1),d(null)}catch(e){console.error("Failed to fetch user info:",e),l(!1),d(null)}}catch(e){console.error("Auth check failed:",e),l(!1),d(null)}finally{f(!1)}})()},[]);let h=async(e,t,r)=>{try{let a=await fetch("".concat(i.JR,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,rememberMe:r}),credentials:"include"});if(!a.ok)try{let e=await a.json();throw Error(e.message||"Login failed")}catch(e){throw Error("Login failed. Please check your credentials.")}let n=await a.json();if(n.token)(0,i.O5)(n.token),l(!0),d({id:"1",username:e,roles:["USER"]}),p.push("/");else throw Error("No token received")}catch(e){if(console.error("Login error:",e),e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Unable to connect to the backend server at ".concat(i.JR,". Please ensure the server is running."));throw e}},m=async()=>{try{fetch("".concat(i.JR,"/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",...(0,i.c4)()?{Authorization:"Bearer ".concat((0,i.c4)())}:{}},credentials:"include"}).catch(e=>console.error("Logout API call failed:",e))}finally{(0,i.QF)(),l(!1),d(null),p.push("/login")}};return(0,a.jsx)(o.Provider,{value:{isAuthenticated:r,user:c,isLoading:u,login:h,logout:m},children:t})}let c=()=>(0,n.useContext)(o)},968:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var a=r(2115),n=r(3655),s=r(5155),i=a.forwardRef((e,t)=>(0,s.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},1186:(e,t,r)=>{"use strict";r.d(t,{JR:()=>a,O5:()=>s,QF:()=>i,c4:()=>n,v$:()=>o});let a="http://localhost:8080";function n(){return localStorage.getItem("auth-token")}function s(e){localStorage.setItem("auth-token",e),document.cookie="auth-token=".concat(e,"; path=/; max-age=86400; SameSite=Strict")}function i(){localStorage.removeItem("auth-token"),document.cookie="auth-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict"}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=n(),a={...t.headers,"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}};return await fetch(e,{...t,headers:a,credentials:"include"})}catch(t){throw console.error("API request failed:",t),Error("Failed to connect to the backend API at ".concat(e,". Please ensure the backend server is running."))}}},2714:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(5155),n=r(2115),s=r(968),i=r(2085),o=r(3999);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.b,{ref:t,className:(0,o.cn)(l(),r),...n})});c.displayName=s.b.displayName},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),n=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},5139:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var a=r(5155),n=r(2115),s=r(6981),i=r(5196),o=r(3999);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,a.jsx)(s.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})})});l.displayName=s.bL.displayName},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5386:(e,t,r)=>{Promise.resolve().then(r.bind(r,8007))},5503:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(2115);function n(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},6981:(e,t,r)=>{"use strict";r.d(t,{C1:()=>R,bL:()=>N});var a=r(2115),n=r(6101),s=r(6081),i=r(5185),o=r(5845),l=r(5503),c=r(1275),d=r(8905),u=r(3655),f=r(5155),p="Checkbox",[h,m]=(0,s.A)(p),[v,g]=h(p),x=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:l,defaultChecked:c,required:d,disabled:p,value:h="on",onCheckedChange:m,form:g,...x}=e,[b,y]=a.useState(null),N=(0,n.s)(t,e=>y(e)),R=a.useRef(!1),C=!b||g||!!b.closest("form"),[S=!1,A]=(0,o.i)({prop:l,defaultProp:c,onChange:m}),E=a.useRef(S);return a.useEffect(()=>{let e=null==b?void 0:b.form;if(e){let t=()=>A(E.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[b,A]),(0,f.jsxs)(v,{scope:r,state:S,disabled:p,children:[(0,f.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":w(S)?"mixed":S,"aria-required":d,"data-state":j(S),"data-disabled":p?"":void 0,disabled:p,value:h,...x,ref:N,onKeyDown:(0,i.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.m)(e.onClick,e=>{A(e=>!!w(e)||!e),C&&(R.current=e.isPropagationStopped(),R.current||e.stopPropagation())})}),C&&(0,f.jsx)(k,{control:b,bubbles:!R.current,name:s,value:h,checked:S,required:d,disabled:p,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!w(c)&&c})]})});x.displayName=p;var b="CheckboxIndicator",y=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...n}=e,s=g(b,r);return(0,f.jsx)(d.C,{present:a||w(s.state)||!0===s.state,children:(0,f.jsx)(u.sG.span,{"data-state":j(s.state),"data-disabled":s.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});y.displayName=b;var k=e=>{let{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...i}=e,o=a.useRef(null),d=(0,l.Z)(r),u=(0,c.X)(t);a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let a=new Event("click",{bubbles:n});e.indeterminate=w(r),t.call(e,!w(r)&&r),e.dispatchEvent(a)}},[d,r,n]);let p=a.useRef(!w(r)&&r);return(0,f.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=s?s:p.current,...i,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function j(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var N=x,R=y},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(5155),n=r(2115),s=r(9708),i=r(2085),o=r(3999);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},8007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),n=r(2115),s=r(5695),i=r(395),o=r(7168),l=r(9852),c=r(2714),d=r(5139),u=r(8482),f=r(9026),p=r(5339);function h(){let[e,t]=(0,n.useState)(""),[r,h]=(0,n.useState)(""),[m,v]=(0,n.useState)(!1),[g,x]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),{login:k}=(0,i.A)(),w=(0,s.useRouter)(),j=async t=>{t.preventDefault(),y(!0),x("");try{await k(e,r,m),w.push("/")}catch(e){x(e.message||"Login failed. Please check your credentials.")}finally{y(!1)}};return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)(u.Zp,{className:"w-[350px]",children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{className:"text-2xl text-center",children:"Database Tools"}),(0,a.jsx)(u.BT,{className:"text-center",children:"Please sign in to continue"})]}),(0,a.jsxs)(u.Wu,{children:[g&&(0,a.jsxs)(f.Fc,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)(f.TN,{children:g})]}),(0,a.jsx)("form",{onSubmit:j,children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"username",children:"Username"}),(0,a.jsx)(l.p,{id:"username",type:"text",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"password",children:"Password"}),(0,a.jsx)(l.p,{id:"password",type:"password",value:r,onChange:e=>h(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.S,{id:"remember",checked:m,onCheckedChange:e=>v(e)}),(0,a.jsx)(c.J,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]}),(0,a.jsx)(o.$,{type:"submit",className:"w-full",disabled:b,children:b?"Signing in...":"Sign in"})]})})]})]})})}},8482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var a=r(5155),n=r(2115),s=r(3999);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},9026:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>l,TN:()=>d,XL:()=>c});var a=r(5155),n=r(2115),s=r(2085),i=r(3999);let o=(0,s.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:n}),r),...s})});l.displayName="Alert";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})});c.displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...n})});d.displayName="AlertDescription"},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(5155),n=r(2115),s=r(3999);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[576,441,684,358],()=>t(5386)),_N_E=e.O()}]);