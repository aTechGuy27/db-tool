(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{103:(e,t,r)=>{Promise.resolve().then(r.bind(r,9304)),Promise.resolve().then(r.bind(r,395)),Promise.resolve().then(r.t.bind(r,9840,23)),Promise.resolve().then(r.t.bind(r,9324,23))},395:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>c});var n=r(5155),o=r(2115),a=r(5695),s=r(1186);let l=(0,o.createContext)({isAuthenticated:!1,user:null,isLoading:!0,login:async()=>{},logout:()=>{}});function c(e){let{children:t}=e,[r,c]=(0,o.useState)(!1),[i,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),m=(0,a.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=(0,s.c4)();if(!e){c(!1),u(null),h(!1);return}try{let t=await fetch("".concat(s.JR,"/api/auth/user"),{headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(t.ok){let e=await t.json();c(!0),u(e)}else(0,s.QF)(),c(!1),u(null)}catch(e){console.error("Failed to fetch user info:",e),c(!1),u(null)}}catch(e){console.error("Auth check failed:",e),c(!1),u(null)}finally{h(!1)}})()},[]);let f=async(e,t,r)=>{try{let n=await fetch("".concat(s.JR,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,rememberMe:r}),credentials:"include"});if(!n.ok)try{let e=await n.json();throw Error(e.message||"Login failed")}catch(e){throw Error("Login failed. Please check your credentials.")}let o=await n.json();if(o.token)(0,s.O5)(o.token),c(!0),u({id:"1",username:e,roles:["USER"]}),m.push("/");else throw Error("No token received")}catch(e){if(console.error("Login error:",e),e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Unable to connect to the backend server at ".concat(s.JR,". Please ensure the server is running."));throw e}},y=async()=>{try{fetch("".concat(s.JR,"/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",...(0,s.c4)()?{Authorization:"Bearer ".concat((0,s.c4)())}:{}},credentials:"include"}).catch(e=>console.error("Logout API call failed:",e))}finally{(0,s.QF)(),c(!1),u(null),m.push("/login")}};return(0,n.jsx)(l.Provider,{value:{isAuthenticated:r,user:i,isLoading:d,login:f,logout:y},children:t})}let i=()=>(0,o.useContext)(l)},1186:(e,t,r)=>{"use strict";r.d(t,{JR:()=>n,O5:()=>a,QF:()=>s,c4:()=>o,v$:()=>l});let n="http://localhost:8080";function o(){return localStorage.getItem("auth-token")}function a(e){localStorage.setItem("auth-token",e),document.cookie="auth-token=".concat(e,"; path=/; max-age=86400; SameSite=Strict")}function s(){localStorage.removeItem("auth-token"),document.cookie="auth-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict"}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=o(),n={...t.headers,"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}};return await fetch(e,{...t,headers:n,credentials:"include"})}catch(t){throw console.error("API request failed:",t),Error("Failed to connect to the backend API at ".concat(e,". Please ensure the backend server is running."))}}},1362:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,N:()=>u});var n=r(2115),o=(e,t,r,n,o,a,s,l)=>{let c=document.documentElement,i=["light","dark"];function u(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(c.classList.remove(...n),c.classList.add(a&&a[t]?a[t]:t)):c.setAttribute(e,t)}),r=t,l&&i.includes(r)&&(c.style.colorScheme=r)}if(n)u(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(n)}catch(e){}},a=["light","dark"],s="(prefers-color-scheme: dark)",l=n.createContext(void 0),c={setTheme:e=>{},themes:[]},i=()=>{var e;return null!=(e=n.useContext(l))?e:c},u=e=>n.useContext(l)?n.createElement(n.Fragment,null,e.children):n.createElement(h,{...e}),d=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:o=!0,enableColorScheme:c=!0,storageKey:i="theme",themes:u=d,defaultTheme:h=o?"system":"light",attribute:g="data-theme",value:v,children:b,nonce:k,scriptProps:S}=e,[w,E]=n.useState(()=>f(i,h)),[T,C]=n.useState(()=>"system"===w?p():w),P=v?Object.values(v):u,A=n.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=p());let n=v?v[t]:t,s=r?y(k):null,l=document.documentElement,i=e=>{"class"===e?(l.classList.remove(...P),n&&l.classList.add(n)):e.startsWith("data-")&&(n?l.setAttribute(e,n):l.removeAttribute(e))};if(Array.isArray(g)?g.forEach(i):i(g),c){let e=a.includes(h)?h:null,r=a.includes(t)?t:e;l.style.colorScheme=r}null==s||s()},[k]),L=n.useCallback(e=>{let t="function"==typeof e?e(w):e;E(t);try{localStorage.setItem(i,t)}catch(e){}},[w]),I=n.useCallback(e=>{C(p(e)),"system"===w&&o&&!t&&A("system")},[w,t]);n.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),n.useEffect(()=>{let e=e=>{e.key===i&&(e.newValue?E(e.newValue):L(h))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[L]),n.useEffect(()=>{A(null!=t?t:w)},[t,w]);let x=n.useMemo(()=>({theme:w,setTheme:L,forcedTheme:t,resolvedTheme:"system"===w?T:w,themes:o?[...u,"system"]:u,systemTheme:o?T:void 0}),[w,L,t,T,o,u]);return n.createElement(l.Provider,{value:x},n.createElement(m,{forcedTheme:t,storageKey:i,attribute:g,enableSystem:o,enableColorScheme:c,defaultTheme:h,value:v,themes:u,nonce:k,scriptProps:S}),b)},m=n.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:a,enableSystem:s,enableColorScheme:l,defaultTheme:c,value:i,themes:u,nonce:d,scriptProps:h}=e,m=JSON.stringify([a,r,c,t,u,i,s,l]).slice(1,-1);return n.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(o.toString(),")(").concat(m,")")}})}),f=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},y=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},p=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9304:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>a});var n=r(5155),o=r(1362);function a(e){let{children:t,...r}=e;return(0,n.jsx)(o.N,{...r,children:t})}},9324:()=>{},9840:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_b677dd"}}},e=>{var t=t=>e(e.s=t);e.O(0,[385,441,684,358],()=>t(103)),_N_E=e.O()}]);